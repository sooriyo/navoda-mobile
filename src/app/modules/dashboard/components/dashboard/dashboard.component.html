@if (isRouteSelected) {
    <div class="container mx-auto px-4 py-6 max-w-lg">
        <!-- Route Selection -->
        <div class="bg-white rounded-lg shadow-md p-4 mb-6">
            <div class="relative">
                <select class="w-full p-2.5 bg-gray-50 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 appearance-none"
                        (change)="onRouteChange($event)"
                >
                    <option hidden>Select Route</option>
                    @for (route of routeDTO; track route.id) {
                        <option [value]="route.name">{{ route.name.toUpperCase() }}</option>
                    }
                </select>
            </div>
        </div>
    </div>
}

<div class="container mx-auto px-4 py-6 max-w-lg">
    <!-- Shop Selection -->
    <div class="bg-white rounded-lg shadow-md p-4 mb-6">
        <div class="relative">
            <select
                    (change)="handleShopChange($event)"
                    class="w-full p-2.5 bg-gray-50 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 appearance-none">
                <option hidden>Select Shop</option>
                @for (shop of shopDTO; track shop.id) {
                    <option [value]="shop.id">{{ shop.shopCode }} - {{ shop.shortName || shop.fullName }}</option>
                }
            </select>
        </div>
    </div>

    <!-- New Sale -->
    <div class="bg-white rounded-lg shadow-md p-4 mb-6">
        <h2 class="text-lg font-semibold text-gray-800 mb-4">New Sale</h2>
        <form class="space-y-4">

            <div class="relative">
                <select
                        (change)="handleProductChange($event)"
                        [disabled]="!$$shopData() || $$isLoading()"
                        class="w-full p-2.5 bg-gray-50 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 appearance-none">
                    <option hidden value="">Select Product</option>
                    @if ($$isLoading()) {<option disabled>Loading products...</option>
                    } @else if ($$shopData()?.products?.length) {
                        @for (product of $$shopData()?.products; track product.productId) {
                            <option [value]="product.productId">
                                {{ product.productName.toUpperCase() }}
                            </option>
                        }
                    } @else {
                        <option disabled>No products available</option>
                    }
                </select>
            </div>

            <!-- Size/Variant Selection -->
                <div class="relative">
                    <select
                            (change)="handleVariantChange($event)"
                            [disabled]="!$$selectedProduct()"
                            class="w-full p-2.5 bg-gray-50 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 appearance-none">
                        <option hidden value="">Select Size</option>
                        @if ($$selectedProduct()?.productVariants?.length) {
                            @for (variant of $$selectedProduct()?.productVariants; track variant.productVariantId) {
                                <option [value]="variant.productVariantId">
                                    {{ variant.weight }}kg - Rs.{{ variant.price }}
                                </option>
                            }
                        } @else {
                            <option disabled>No variants available</option>
                        }
                    </select>
            </div>

            <!-- Quantity & Add to Cart -->
            <div class="flex gap-2">
                <div class="relative flex-1">
                    <input type="number" min="1"
                           class="w-full p-2.5 bg-gray-50 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
                           placeholder="Quantity">
                </div>
                <button type="button"
                        class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed flex items-center gap-2">
                    <span class="hidden sm:inline">Add to Order</span>
                </button>
            </div>
        </form>
    </div>

    <!-- Cart Section -->
    <div class="bg-white rounded-lg shadow-md p-4 mb-6">
        <h2 class="text-lg font-semibold text-gray-800 mb-4">Current Order</h2>
        <table class="w-full min-w-full divide-y divide-gray-200">
            <thead class="bg-gray-50">
            <tr>
                <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">Product</th>
                <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">Size</th>
                <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">Qty</th>
                <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">Price</th>
                <th class="px-4 py-3 text-xs font-medium text-gray-500 uppercase"></th>
            </tr>
            </thead>
            <tbody class="bg-white divide-y divide-gray-200">
            <tr>
                <td class="px-4 py-3 text-sm">Product 1</td>
                <td class="px-4 py-3 text-sm">1kg</td>
                <td class="px-4 py-3 text-sm">1</td>
                <td class="px-4 py-3 text-sm">$10.00</td>
                <td class="px-4 py-3 text-sm">
                    <button class="text-red-600 hover:text-red-800">âœ•</button>
                </td>
            </tr>
            <tr class="bg-gray-50">
                <td colspan="3" class="px-4 py-3 text-sm font-semibold">Total</td>
                <td colspan="2" class="px-4 py-3 text-sm font-semibold">$10.00</td>
            </tr>
            </tbody>
        </table>

        <!-- Payment Method Selection -->
        <div class="mt-4">
            <label class="block text-sm font-medium text-gray-700">Payment Method</label>
            <div class="flex gap-4 mt-1">
                <label class="inline-flex items-center">
                    <input type="radio" class="form-radio">
                    <span class="ml-2">Cash</span>
                </label>
                <label class="inline-flex items-center">
                    <input type="radio" class="form-radio">
                    <span class="ml-2">Credit</span>
                </label>
            </div>
        </div>

        <!-- Cart Actions -->
        <div class="flex gap-2 mt-4">
            <button class="button-blue flex-grow">Complete Order</button>
            <button class="button-red flex-grow">Cancel</button>
        </div>
    </div>

    <!-- Unpaid Orders -->
    <div class="bg-white rounded-lg shadow-md p-4 mb-6">
        <h2 class="text-lg font-semibold text-gray-800 mb-4">Unpaid Orders</h2>
        <table class="w-full min-w-full divide-y divide-gray-200">
            <thead class="bg-gray-50">
            <tr>
                <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">Order No</th>
                <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">Amount</th>
                <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">Payment Type</th>
                <th class="px-4 py-3 text-xs font-medium text-gray-500 uppercase">Action</th>
            </tr>
            </thead>
            <tbody class="bg-white divide-y divide-gray-200">
            <tr>
                <td class="px-4 py-3 text-sm">001</td>
                <td class="px-4 py-3 text-sm">$20.00</td>
                <td class="px-4 py-3 text-sm uppercase">Credit</td>
                <td class="px-4 py-3 text-sm">
                    <button class="px-3 py-1 bg-blue-600 text-white rounded-lg hover:bg-blue-700">Mark as Paid</button>
                </td>
            </tr>
            </tbody>
        </table>
    </div>

    <!-- Returns Section -->
    <div class="bg-white rounded-lg shadow-md p-4 mb-6">
        <h2 class="text-lg font-semibold text-gray-800 mb-4">Product Returns</h2>
        <form class="space-y-4">
            <!-- Product Selection for Returns -->
            <div class="relative">
                <select class="w-full p-2.5 bg-gray-50 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 appearance-none">
                    <option>Select Product</option>
                    <option>Product 1</option>
                    <option>Product 2</option>
                    <option>Product 3</option>
                </select>
            </div>
        </form>
    </div>
</div>
